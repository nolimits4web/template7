/**
 * Template7 1.0.5
 * Mobile-first JavaScript template engine
 * 
 * http://www.idangero.us/template7/
 * 
 * Copyright 2015, Vladimir Kharlampidi
 * The iDangero.us
 * http://www.idangero.us/
 * 
 * Licensed under MIT
 * 
 * Released on: March 28, 2015
 */
window.Template7=function(){"use strict";function e(e){return"[object Array]"===Object.prototype.toString.apply(e)}function t(e){return"function"==typeof e}function n(e){var t,n,r,i=e.replace(/[{}#}]/g,"").split(" "),a=[];for(n=0;n<i.length;n++){var l=i[n];if(0===n)a.push(l);else if(0===l.indexOf('"'))if(2===l.match(/"/g).length)a.push(l);else{for(t=0,r=n+1;r<i.length;r++)if(l+=" "+i[r],i[r].indexOf('"')>=0){t=r,a.push(l);break}t&&(n=t)}else if(l.indexOf("=")>0){var o=l.split("="),s=o[0],f=o[1];if(2!==f.match(/"/g).length){for(t=0,r=n+1;r<i.length;r++)if(f+=" "+i[r],i[r].indexOf('"')>=0){t=r;break}t&&(n=t)}var p=[s,f.replace(/"/g,"")];a.push(p)}else a.push(l)}return a}function r(t){var r,i,a=[];if(!t)return[];var l=t.split(/({{[^{^}]*}})/);for(r=0;r<l.length;r++){var o=l[r];if(""!==o)if(o.indexOf("{{")<0)a.push({type:"plain",content:o});else{if(o.indexOf("{/")>=0)continue;if(o.indexOf("{#")<0&&o.indexOf(" ")<0&&o.indexOf("else")<0){a.push({type:"variable",contextName:o.replace(/[{}]/g,"")});continue}var s=n(o),f=s[0],p=[],c={};for(i=1;i<s.length;i++){var h=s[i];e(h)?c[h[0]]="false"===h[1]?!1:h[1]:p.push(h)}if(o.indexOf("{#")>=0){var u,v="",d="",g=0,x=!1,m=!1,y=0;for(i=r+1;i<l.length;i++)if(l[i].indexOf("{{#")>=0&&y++,l[i].indexOf("{{/")>=0&&y--,l[i].indexOf("{{#"+f)>=0)v+=l[i],m&&(d+=l[i]),g++;else if(l[i].indexOf("{{/"+f)>=0){if(!(g>0)){u=i,x=!0;break}g--,v+=l[i],m&&(d+=l[i])}else l[i].indexOf("else")>=0&&0===y?m=!0:(m||(v+=l[i]),m&&(d+=l[i]));x&&(u&&(r=u),a.push({type:"helper",helperName:f,contextName:p,content:v,inverseContent:d,hash:c}))}else o.indexOf(" ")>0&&a.push({type:"helper",helperName:f,contextName:p,hash:c})}}return a}var i=function(e){function t(e,t){return e.content?l(e.content,t):function(){return""}}function n(e,t){return e.inverseContent?l(e.inverseContent,t):function(){return""}}function i(e,t){var n,r,i=0;if(0===e.indexOf("../")){i=e.split("../").length-1;var a=t.split("_")[1]-i;t="ctx_"+(a>=1?a:1),r=e.split("../")[i].split(".")}else 0===e.indexOf("@global")?(t="Template7.global",r=e.split("@global.")[1].split(".")):0===e.indexOf("@root")?(t="ctx_1",r=e.split("@root.")[1].split(".")):r=e.split(".");n=t;for(var l=0;l<r.length;l++){var o=r[l];0===o.indexOf("@")?l>0?n+="[(data && data."+o.replace("@","")+")]":n="(data && data."+e.replace("@","")+")":isFinite(o)?n+="["+o+"]":0===o.indexOf("this")?n=o.replace("this",t):n+="."+o}return n}function a(e,t){for(var n=[],r=0;r<e.length;r++)n.push(0===e[r].indexOf('"')?e[r]:i(e[r],t));return n.join(", ")}function l(e,l){if(l=l||1,e=e||o.template,"string"!=typeof e)throw new Error("Template7: Template must be a string");var s=r(e);if(0===s.length)return function(){return""};var f="ctx_"+l,p="(function ("+f+", data) {\n";1===l&&(p+="function isArray(arr){return Object.prototype.toString.apply(arr) === '[object Array]';}\n",p+="function isFunction(func){return (typeof func === 'function');}\n",p+='function c(val, ctx) {if (typeof val !== "undefined") {if (isFunction(val)) {return val.call(ctx);} else return val;} else return "";}\n'),p+="var r = '';\n";var c;for(c=0;c<s.length;c++){var h=s[c];if("plain"!==h.type){var u,v;if("variable"===h.type&&(u=i(h.contextName,f),p+="r += c("+u+", "+f+");"),"helper"===h.type)if(h.helperName in o.helpers)v=a(h.contextName,f),p+="r += (Template7.helpers."+h.helperName+").call("+f+", "+(v&&v+", ")+"{hash:"+JSON.stringify(h.hash)+", data: data || {}, fn: "+t(h,l+1)+", inverse: "+n(h,l+1)+", root: ctx_1});";else{if(h.contextName.length>0)throw new Error('Template7: Missing helper: "'+h.helperName+'"');u=i(h.helperName,f),p+="if ("+u+") {",p+="if (isArray("+u+")) {",p+="r += (Template7.helpers.each).call("+f+", "+u+", {hash:"+JSON.stringify(h.hash)+", data: data || {}, fn: "+t(h,l+1)+", inverse: "+n(h,l+1)+", root: ctx_1});",p+="}else {",p+="r += (Template7.helpers.with).call("+f+", "+u+", {hash:"+JSON.stringify(h.hash)+", data: data || {}, fn: "+t(h,l+1)+", inverse: "+n(h,l+1)+", root: ctx_1});",p+="}}"}}else p+="r +='"+h.content.replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/'/g,"\\'")+"';"}return p+="\nreturn r;})",eval.call(window,p)}var o=this;o.template=e,o.compile=function(e){return o.compiled||(o.compiled=l(e)),o.compiled}};i.prototype={options:{},helpers:{"if":function(e,n){return t(e)&&(e=e.call(this)),e?n.fn(this,n.data):n.inverse(this,n.data)},unless:function(e,n){return t(e)&&(e=e.call(this)),e?n.inverse(this,n.data):n.fn(this,n.data)},each:function(n,r){var i="",a=0;if(t(n)&&(n=n.call(this)),e(n)){for(r.hash.reverse&&(n=n.reverse()),a=0;a<n.length;a++)i+=r.fn(n[a],{first:0===a,last:a===n.length-1,index:a});r.hash.reverse&&(n=n.reverse())}else for(var l in n)a++,i+=r.fn(n[l],{key:l});return a>0?i:r.inverse(this)},"with":function(e,n){return t(e)&&(e=e.call(this)),n.fn(e)},join:function(e,n){return t(e)&&(e=e.call(this)),e.join(n.hash.delimiter||n.hash.delimeter)},js:function(e){var t;return t=e.indexOf("return")>=0?"(function(){"+e+"})":"(function(){return ("+e+")})",eval.call(this,t).call(this)},js_compare:function(e,t){var n;n=e.indexOf("return")>=0?"(function(){"+e+"})":"(function(){return ("+e+")})";var r=eval.call(this,n).call(this);return r?t.fn(this,t.data):t.inverse(this,t.data)}}};var a=function(e,t){if(2===arguments.length){var n=new i(e),r=n.compile()(t);return n=null,r}return new i(e)};return a.registerHelper=function(e,t){i.prototype.helpers[e]=t},a.unregisterHelper=function(e){i.prototype.helpers[e]=void 0,delete i.prototype.helpers[e]},a.compile=function(e,t){var n=new i(e,t);return n.compile()},a.options=i.prototype.options,a.helpers=i.prototype.helpers,a}();
//# sourceMappingURL=template7.min.js.map